(()=>{"use strict";var e,l={457:()=>{const e=window.wp.blocks,l=window.wp.i18n,t=window.wp.blockEditor,n=window.wp.components,r=window.wp.element,a=e=>new RegExp("^https?://(www.)?deezer.com/([a-z]{2}/)?(album|artist|playlist|show|track)/([0-9]+)$").test(e),s=window.ReactJSXRuntime,i=()=>(0,s.jsxs)(n.SVG,{className:"deezer-horizontal-lockup",viewBox:"112.1 111.9 991.1 277.7",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)(n.Path,{d:"M465.1 179.6h55c34 0 58 22.6 58 54.8 0 32.2-24 54.8-58 54.8h-55V179.6zm42.7 80h10c10.7 0 16.4-7.1 16.4-25.2 0-18-5.7-25.2-16.4-25.2h-10v50.4zM675 289.2h-90.3V179.6H675v29.6h-47.7v12.7h44.9V246h-44.9v13.5H675v29.6zm100.5 0h-90.2V179.6h90.2v29.6h-47.7v12.7h44.9V246h-44.9v13.5h47.7v29.6zm327.7 0a353.5 353.5 0 0 0-26.4-54.7c13.6-4 21.7-12.5 21.7-25.6 0-20-18.4-29.3-47.5-29.3h-59.8v109.6h42.8V244c9.5 16 16.5 31 21 45.3h48.2zm-69.2-60.6v-19.4h14.8c6.2 0 9.8 3.4 9.8 9.7 0 6.2-3.6 9.7-9.8 9.7H1034zm-53 60.6h-90.3V179.6H981v29.6h-47.7v12.7H978V246h-44.8v13.5H981v29.6zm-195.2-80h44c-18.2 15-33.3 31.9-44.9 50.4v29.6h97v-29.6h-48.5a255.5 255.5 0 0 1 48.5-50.4v-29.6h-96.1v29.6z",fill:"#fff"}),(0,s.jsx)(n.Path,{d:"M345 154.3c2.5-15 6.3-24.3 10.5-24.3 7.8 0 14 32.5 14 72.6 0 40-6.2 72.6-14 72.6-3.2 0-6.2-5.6-8.5-14.8-3.8 33.8-11.6 57.1-20.6 57.1-7 0-13.2-14-17.4-36-2.9 42-10.1 71.7-18.6 71.7-5.3 0-10-11.8-13.7-31-4.3 39.6-14.2 67.4-25.8 67.4-11.6 0-21.5-27.8-25.8-67.4-3.5 19.2-8.4 31-13.7 31-8.4 0-15.6-29.8-18.5-71.7-4.2 22-10.5 36-17.5 36-9 0-16.8-23.2-20.5-57.1-2.4 9.3-5.3 14.8-8.5 14.8-7.8 0-14.1-32.5-14.1-72.6 0-40.1 6.3-72.6 14-72.6 4.3 0 8 9.4 10.6 24.3 4.2-25.7 11-42.4 18.5-42.4 9.1 0 17 23.6 20.7 57.9 3.6-25 9.1-40.9 15.3-40.9 8.7 0 16 31.3 18.8 75 5.1-22.4 12.5-36.5 20.7-36.5 8.3 0 15.7 14 20.8 36.4 2.7-43.6 10.1-74.9 18.8-74.9 6.1 0 11.6 16 15.3 40.9 3.7-34.3 11.6-58 20.6-58 7.6 0 14.4 16.8 18.6 42.5zm-233 41.1c0-17.9 3.7-32.4 8.1-32.4 4.4 0 8 14.5 8 32.4 0 18-3.6 32.5-8 32.5s-8-14.5-8-32.5zm261.7 0c0-17.9 3.6-32.4 8-32.4 4.5 0 8 14.5 8 32.4 0 18-3.5 32.5-8 32.5-4.4 0-8-14.5-8-32.5z",fill:"#A238FF"})]});function c({deezerUrl:e,theme:l,height:t,showTracklist:n}){const r=new URL(e).pathname.split("/"),a=r[r.length-2];let i=`https://widget.deezer.com/widget/${l}/${a}/${r[r.length-1]}`;return"artist"===a&&(i+="/top_tracks"),"no"===n&&(i+="?tracklist=false"),(0,s.jsx)("iframe",{title:"deezer-widget",src:i,height:t||"300px",allow:"encrypted-media; clipboard-write"})}const d={artist:function({result:e,setDeezerUrl:l}){return(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__card wp-block-nlangle-deezer-widget__card--artist",children:[(0,s.jsx)("img",{src:e.picture_small,alt:e.name}),(0,s.jsx)("div",{className:"wp-block-nlangle-deezer-widget__card-content",children:(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__card-title",onClick:()=>l(e.link),children:e.name})})]})},album:function({result:e,setDeezerUrl:l}){return(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__card wp-block-nlangle-deezer-widget__card--album",children:[(0,s.jsx)("img",{src:e.cover_small,alt:e.title}),(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__card-content",children:[(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__card-title",onClick:()=>l(e.link),children:e.title}),(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__card-artist",onClick:()=>l(e.artist.link),children:e.artist.name})]})]})},common:function({result:e,setDeezerUrl:l}){return(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__card wp-block-nlangle-deezer-widget__card--common",children:[(0,s.jsx)("img",{src:e.picture_small,alt:e.title}),(0,s.jsx)("div",{className:"wp-block-nlangle-deezer-widget__card-content",children:(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__card-title",onClick:()=>l(e.link),children:e.title})})]})},track:function({result:e,setDeezerUrl:l}){return(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__card wp-block-nlangle-deezer-widget__card--track",children:[(0,s.jsx)("img",{src:e.album.cover_small,alt:e.album.title}),(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__card-content",children:[(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__card-title",onClick:()=>l(e.link),children:e.title}),(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__card-artist",onClick:()=>l(e.artist.link),children:e.artist.name}),(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__card-album",onClick:()=>l(`https://www.deezer.com/album/${e.album.id}`),children:e.album.title})]})]})}},o=JSON.parse('{"UU":"nlangle/deezer-widget"}');(0,e.registerBlockType)(o.UU,{edit:function({attributes:e,setAttributes:o}){const g=(0,t.useBlockProps)(),[w,h]=(0,r.useState)(""),[_,b]=(0,r.useState)([]),[m,z]=(0,r.useState)(""),[k,u]=(0,r.useState)(!a(e.deezerUrl)),p=e=>{const l=d[e.type]||d.common;return(0,s.jsx)(l,{result:e,setDeezerUrl:v})},v=e=>{b([]),u(!1),o({deezerUrl:e})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.InspectorControls,{children:(0,s.jsxs)(n.PanelBody,{title:(0,l.__)("Deezer Widget","nlangle-deezer-widget-block"),initialOpen:!0,children:[(0,s.jsx)(n.RadioControl,{label:(0,l.__)("Theme","nlangle-deezer-widget-block"),selected:e.theme,options:[{label:(0,l.__)("Auto","nlangle-deezer-widget-block"),value:"auto"},{label:(0,l.__)("Dark","nlangle-deezer-widget-block"),value:"dark"},{label:(0,l.__)("Light","nlangle-deezer-widget-block"),value:"light"}],onChange:e=>o({theme:e})}),(0,s.jsx)(n.RadioControl,{label:(0,l.__)("Show tracklist","nlangle-deezer-widget-block"),selected:e.showTracklist,options:[{label:(0,l.__)("Yes","nlangle-deezer-widget-block"),value:"yes"},{label:(0,l.__)("No","nlangle-deezer-widget-block"),value:"no"}],onChange:e=>o({showTracklist:e})}),(0,s.jsx)(n.RangeControl,{label:(0,l.__)("Height","nlangle-deezer-widget-block"),value:e.height,onChange:e=>o({height:e}),min:150,max:1e3,step:10,allowReset:!0})]})}),!k&&(0,s.jsx)(t.BlockControls,{children:(0,s.jsx)(n.ToolbarGroup,{controls:[{icon:"edit",title:(0,l.__)("Edit","nlangle-deezer-widget-block"),onClick:()=>u(!0)}]})},"toolbar"),(0,s.jsx)("div",{...g,children:k||!a(e.deezerUrl)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{}),(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__form",children:[(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__form-row",children:[(0,s.jsx)(n.SelectControl,{label:(0,l.__)("Filter","nlangle-deezer-widget-block"),value:m,options:[{label:(0,l.__)("Default","nlangle-deezer-widget-block"),value:""},{label:(0,l.__)("Album","nlangle-deezer-widget-block"),value:"album"},{label:(0,l.__)("Artist","nlangle-deezer-widget-block"),value:"artist"},{label:(0,l.__)("Playlist","nlangle-deezer-widget-block"),value:"playlist"},{label:(0,l.__)("Podcast","nlangle-deezer-widget-block"),value:"podcast"},{label:(0,l.__)("Track","nlangle-deezer-widget-block"),value:"track"}],onChange:e=>{z(e),b([]),h("")},__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__form-search",children:[(0,s.jsx)(n.TextControl,{label:(0,l.__)("Search","nlangle-deezer-widget-block"),placeholder:(0,l.__)("Rick Astley","nlangle-deezer-widget-block"),value:w,onChange:e=>{const l=new URL(deezerWidgetBlockData.restSearchUrl);l.searchParams.set("query",e),l.searchParams.set("connection",m),fetch(l,{headers:{"X-WP-Nonce":deezerWidgetBlockData.nonce}}).then((e=>e.json())).then((e=>{b(e)})),h(e)}}),_.data&&_.data.length>0&&(0,s.jsx)("ul",{className:"wp-block-nlangle-deezer-widget__search-results",children:_.data.map((e=>(0,s.jsx)("li",{children:p(e)},e.id)))})]})]}),(0,s.jsxs)("div",{className:"wp-block-nlangle-deezer-widget__form-row",children:[(0,s.jsx)(n.TextControl,{label:(0,l.__)("Deezer url","nlangle-deezer-widget-block"),placeholder:(0,l.__)("https://www.deezer.com/us/artist/6160","nlangle-deezer-widget-block"),value:e.deezerUrl,onChange:e=>{o({deezerUrl:e})}}),e.deezerUrl&&!a(e.deezerUrl)?(0,s.jsx)("p",{className:"wp-block-nlangle-deezer-widget__form-instruction",children:(0,l.__)("Invalid Deezer url","nlangle-deezer-widget-block")}):(0,s.jsx)("p",{className:"wp-block-nlangle-deezer-widget__form-instruction",children:(0,l.__)("Supported contents: Album, Playlist, Track, Artist, Podcast, Episode","nlangle-deezer-widget-block")})]}),(0,s.jsx)("div",{className:"wp-block-nlangle-deezer-widget__form-row",children:(0,s.jsx)("button",{className:"wp-block-nlangle-deezer-widget__form-submit",onClick:()=>{a(e.deezerUrl)&&u(!1)},children:(0,l.__)("Embed","nlangle-deezer-widget-block")})}),(0,s.jsx)("p",{className:"wp-block-nlangle-deezer-widget__mention",children:(0,l.__)("This block uses the Deezer API and Deezer logo but is not endorsed or certified by Deezer.","nlangle-deezer-widget-block")})]})]}):(0,s.jsx)(c,{...e})})]})},save:function({attributes:e}){const l=t.useBlockProps.save();return(0,s.jsx)(s.Fragment,{children:a(e.deezerUrl)?(0,s.jsx)("div",{...l,children:(0,s.jsx)(c,{...e})}):""})},icon:()=>(0,s.jsx)(n.SVG,{className:"deezer-symbol",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(n.Path,{d:"M19.43 4.38c.2-1.17.5-1.91.83-1.92.61 0 1.11 2.57 1.11 5.74 0 3.16-.5 5.73-1.11 5.73-.26 0-.49-.44-.68-1.17-.3 2.68-.9 4.51-1.62 4.51-.55 0-1.04-1.1-1.38-2.84-.22 3.31-.8 5.66-1.46 5.66-.42 0-.8-.93-1.08-2.45-.34 3.13-1.13 5.32-2.04 5.32-.91 0-1.7-2.19-2.04-5.32-.28 1.52-.66 2.45-1.08 2.45-.67 0-1.24-2.35-1.46-5.66-.34 1.74-.83 2.84-1.38 2.84-.71 0-1.33-1.83-1.62-4.5-.19.73-.42 1.16-.68 1.16-.61 0-1.11-2.57-1.11-5.73 0-3.17.5-5.74 1.11-5.74.33 0 .63.75.83 1.92.33-2.03.87-3.34 1.47-3.34.72 0 1.34 1.86 1.63 4.57.29-1.97.72-3.23 1.21-3.23.68 0 1.27 2.47 1.48 5.92.4-1.77 1-2.88 1.64-2.88.65 0 1.24 1.11 1.64 2.88.22-3.45.8-5.92 1.48-5.92.49 0 .92 1.26 1.21 3.23.3-2.71.92-4.57 1.63-4.57.6 0 1.14 1.31 1.47 3.34zM1.03 7.63c0-1.41.29-2.56.64-2.56.35 0 .63 1.15.63 2.56 0 1.42-.28 2.57-.63 2.57s-.63-1.15-.63-2.57zm20.67 0c0-1.41.28-2.56.63-2.56s.63 1.15.63 2.56c0 1.42-.28 2.57-.63 2.57s-.63-1.15-.63-2.57z"})})})}},t={};function n(e){var r=t[e];if(void 0!==r)return r.exports;var a=t[e]={exports:{}};return l[e](a,a.exports,n),a.exports}n.m=l,e=[],n.O=(l,t,r,a)=>{if(!t){var s=1/0;for(o=0;o<e.length;o++){for(var[t,r,a]=e[o],i=!0,c=0;c<t.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](t[c])))?t.splice(c--,1):(i=!1,a<s&&(s=a));if(i){e.splice(o--,1);var d=r();void 0!==d&&(l=d)}}return l}a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[t,r,a]},n.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={57:0,350:0};n.O.j=l=>0===e[l];var l=(l,t)=>{var r,a,[s,i,c]=t,d=0;if(s.some((l=>0!==e[l]))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(c)var o=c(n)}for(l&&l(t);d<s.length;d++)a=s[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(o)},t=globalThis.webpackChunknlangle_deezer_widget_block=globalThis.webpackChunknlangle_deezer_widget_block||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var r=n.O(void 0,[350],(()=>n(457)));r=n.O(r)})();